!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.animation=e():t.animation=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){t&&t()}function s(){this.taskQueue=[],this.timeline=new o,this.state=u,this.index=0}function r(){return new s}var o=i(1),a=i(2),u=0,h=1,c=2,p=0,f=1;s.prototype.loadImage=function(t){var e=function(e){a(t.slice(),e)},i=p;return this._add(e,i)},s.prototype.changePosition=function(t,e,i){var s,r,o=e.length;if(o){var a=this;s=function(n,s){i&&(t.style.backgroundImage="url("+i+")");var r=Math.min(s/a.interval|0,o),u=e[r-1].split(" ");t.style.backgroundPosition=parseInt(u[0])+"px "+parseInt(u[1])+"px",r===o&&n()},r=f}else s=n,r=p;return this._add(s,r)},s.prototype.changeSrc=function(t,e){var i,s,r=e.length;if(r){var o=this;i=function(i,n){var s=Math.min(n/o.interval|0,r);t.src=e[s-1],s===r&&i()},s=f}else i=n,s=p;return this._add(i,s)},s.prototype.enterFrame=function(t){return this._add(t,f)},s.prototype.then=function(t){var e=this,i=function(i){t(e),i()},n=p;return this._add(i,n)},s.prototype.start=function(t){return this.state===h?this:this.taskQueue.length?(this.state=h,this.interval=t,this._runTask(),this):this},s.prototype.repeat=function(t){var e=this,i=function(){if("undefined"==typeof t)return e.index--,void e._runTask();if(t)t--,e.index--,e._runTask();else{var i=e.taskQueue[e.index];e._next(i)}},n=p;return this._add(i,n)},s.prototype.repeatForever=function(){return this.repeat()},s.prototype.wait=function(t){return this.taskQueue&&this.taskQueue.length>0&&(this.taskQueue[this.taskQueue.length-1].wait=t),this},s.prototype.pause=function(){return this.state===h?(this.state=c,this.waitingTime&&(clearTimeout(this.waitingTime),console.log("clearTimeout(this.waitingTime)")),this.timeline.stop(),this):this},s.prototype.restart=function(){return this.state===c?(this.state=h,this.timeline.restart(),this):this},s.prototype.jump=function(t){return this.state===c?(this.state=h,this.index=t,this._runTask(),this):this},s.prototype.dispose=function(){return this.state!==u?(this.state=u,this.taskQueue=null,this.timeline.stop(),this.timeline=null,this):this},s.prototype._add=function(t,e){return this.taskQueue.push({taskFn:t,type:e}),this},s.prototype._runTask=function(){if(this.taskQueue&&this.state===h){if(this.index===this.taskQueue.length)return void this.dispose();var t=this.taskQueue[this.index];t.type===p?this._syncTask(t):this._asyncTask(t)}},s.prototype._syncTask=function(t){var e=this,i=function(){e._next(t)},n=t.taskFn;n(i)},s.prototype._asyncTask=function(t){var e=this,i=function(i){var n=t.taskFn,s=function(){e.timeline.stop(),e._next(t)};n(s,i)};this.timeline.onenterframe=i,this.timeline.start(this.interval)},s.prototype._next=function(t){var e=this;this.index++,t.wait?this.waitingTime=setTimeout(function(){e._runTask()},t.wait):this._runTask()},s.prototype.getState=function(){return this.state},r.version="0.2.6",t.exports=r},function(t,e){"use strict";function i(){this.animationHandler=0,this.state=r}function n(t,e){function i(){var s=+new Date;t.animationHandler=u(i),s-n>=t.interval&&(t.onenterframe(s-e),n=s)}var n=+new Date;t.startTime=e,i.interval=t.interval,i()}var s=1e3/60,r=0,o=1,a=2;i.prototype.onenterframe=function(t){},i.prototype.start=function(t){this.state!==o&&(this.state=o,this.interval=t||s,n(this,+new Date))},i.prototype.restart=function(){this.state!==o&&this.dur&&this.interval&&(this.state=o,n(this,+new Date-this.dur))},i.prototype.stop=function(){this.state===o&&(this.state=a,this.startTime&&(this.dur=+new Date-this.startTime),h(this.animationHandler))};var u=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,t.interval||s)}}(),h=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(t){window.clearTimeout(t)}}();t.exports=i},function(t,e){"use strict";function i(){return++s}function n(t,e,n){function s(t){function i(){n.onload=n.onerror=null;try{delete window[t.id]}catch(t){}--o||h||(clearTimeout(u),e(a))}t.status="loading";var n=t.img;n.onload=function(){a=a&&!0,t.status="loaded",i()},n.onerror=function(){a=!1,t.status="error",i()},n.src=t.src}function r(){h=!0,e(!1)}var o=0,a=!0,u=0,h=!1;for(var c in t)if(t.hasOwnProperty(c)){var p=t[c];"string"==typeof p&&(p=t[c]={src:p}),p&&p.src&&(o++,p.id="__img_"+c+i(),p.img=window[p.id]=new Image,s(p))}o?n&&(u=setTimeout(r,n)):e(a)}var s=0;t.exports=n}])});