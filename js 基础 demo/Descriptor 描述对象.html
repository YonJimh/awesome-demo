<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        //     var person = {};
        //     Object.defineProperty(person, "name", {
        //         configurable: false,
        //         writable: true,
        //         value: "233"
        //     });
        //     //抛出错误
        //     Object.defineProperty(person, "name", {
        //         writable: false,
        //         value: '111'
        //     });
        //    console.log( person.name)
        // //    person.name= '123'
        //    console.log( person.name)

        var obj = {
            foo: 123
        };
        console.log(Object.getOwnPropertyDescriptor(obj, 'foo'))
        //  {
        //    value: 123,
        //    writable: true,
        //    enumerable: true,
        //    configurable: true
        //  }

        var obj = {}
        Object.defineProperty(obj, 'foo', {
            value: 123
        })
        console.log(Object.getOwnPropertyDescriptor(obj, 'foo'))
        //  {
        //    value: 123,
        //    writable: false,
        //    enumerable: false,
        //    configurable: false
        //  }

        var book = {
            _year: 2004,
            edition: 1
        };
        Object.defineProperty(book, "year", {
            get: function () {
                return this._year;
            },
            set: function (newValue) {
                if (newValue > 2004) {
                    this._year = newValue;
                    this.edition += newValue - 2004;
                }
            }
        });
        book.year = 2005;
        console.log('Object.defineProperty', book, book.edition);
        console.log(Object.getOwnPropertyDescriptor(book,'year'))
        console.log(Object.keys(book));

        // Object.defineProperties
        var book = {
            _year: 2004,
            edition: 1
        };
        Object.defineProperties(book, {
            "year": {
                get: function () {
                    return this._year;
                },
                set: function (newValue) {
                    if (newValue > 2004) {
                        this._year = newValue;
                        this.edition += newValue - 2004;
                    }
                }
            }
        });
        book.year = 2005;
        console.log('Object.defineProperties', book, book.edition);
        console.log(Object.getOwnPropertyDescriptor(book,'year'))
        console.log(Object.keys(book));
        
        // ES6
        var book = {
            _year: 2004,
            edition: 1,
            get year() {
                return this._year;
            },
            set year(newValue) {
                if (newValue > 2004) {
                    this._year = newValue;
                    this.edition += newValue - 2004;
                }
            }
        };
        book.year = 2005;
        console.log('ES6', book, book.edition);
        console.log(Object.getOwnPropertyDescriptor(book,'year'))
        console.log(Object.keys(book));

    </script>
</body>

</html>